<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>10K Pizza: View Your Cryptocurrency Portfolio</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Track and view your cryptocurrency investments and profits in a private, secure portfolio.">
	<meta name="keywords" content="bitcoin, ethereum, litecoin, altcoin, btc, eth, ltc, cryptocurrency, crypto, cryptocurrency portfolio, investing, short, long, hodl, economy, finance, track cryptocurrency, dash, monero, iota, neo, pivx, ubiq, decred, viacoin, vertcoin, dogecoin, ripple" />

	<!-- Bootstrap -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<!-- Font Awesome -->
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

	<!-- Morris Charts -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css" integrity="sha256-szHusaozbQctTn4FX+3l5E0A5zoxz7+ne4fr8NgWJlw=" crossorigin="anonymous" />

	<!-- Bootstrap Date Range Picker -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-daterangepicker/2.1.25/daterangepicker.min.css" integrity="sha256-RqJuUJ19HEfsKUNMC+6GLSatrHeroWygib75lro4BMU=" crossorigin="anonymous" />

	<!-- Metis Menu -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/metisMenu/2.7.0/metisMenu.min.css" integrity="sha256-OufFdETrXbY5YtILsSTzlY+4Ttmq+hUfR1mMYLmKlWo=" crossorigin="anonymous" />

	<!--
		TODO:
			- DONE - Fix IOTA issue
			- DONE - Reduce page time from drawing charts on initial load
			- DONE - Add ability to change reference currency from USD to other major currency
			- Add coin performance information (not sure where to put it... maybe a UI change for it)
			- Matching colors for breakdown and wallet contributions
			- Logarithmic scaling: (https://www.reddit.com/r/BitcoinMarkets/comments/6uh9da/best_porfolio_tracker_with_api_automatic_updates/dlt28xa/)
			- Attach balances to addresses: (https://www.reddit.com/r/CryptoMarkets/comments/6ui0yf/just_released_10k_pizza_a_privacyfocused_open/dlsytro/)
			- Pull wallet balances via API: (same as above)
			- Consider a better UI
	 -->

	<!-- Page style -->
	<style>
		/*!
		 * Start Bootstrap - SB Admin 2 v3.3.7+1 (http://startbootstrap.com/template-overviews/sb-admin-2)
		 * Copyright 2013-2016 Start Bootstrap
		 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap/blob/gh-pages/LICENSE)
		 */
		body {
		  background-color: #f8f8f8;
		}

		#monthly-chart > svg { width: 100% !important; }
		#monthly-chart-diff > svg { width: 100% !important; }
		#monthly-chart-breakdown > svg { width: 100% !important; }
		#monthly-chart-breakdown-pie > svg { width: 100% !important; }
		#comparison-chart > svg { width: 100% !important; }
		#comparison-price-chart > svg { width: 100% !important; }

		ul.donate {
			list-style: none;
		}

		#wrapper {
		  width: 100%;
		}
		#page-wrapper {
		  padding: 0 15px;
		  min-height: 568px;
		  background-color: white;
		}
		.small-page-header {
			margin: 14px 0px;
		}
		.page-header {
			margin-top: 20px;
		}
		.cc-trade-value, .cc-value {
			padding: 4px;
		}
		.cc-input-addon-span {
			padding: 8px;
		}
		@media (min-width: 768px) {
		  #page-wrapper {
		    position: inherit;
		    margin: 0 0 0 175px;
		    padding: 0 30px;
		    border-left: 1px solid #e7e7e7;
		  }
		}
		@media (max-width: 768px) {
		  .half-padding {
		  	padding-left:7.5px;
		  	padding-right:7.5px;
		  }
		  .page-wrapper-buffer {
		    margin: 0px 8px;
		  }
		}
		.navbar-top-links {
		  margin-right: 0;
		}
		.navbar-top-links li {
		  display: inline-block;
		}
		.navbar-top-links li:last-child {
		  margin-right: 15px;
		}
		.navbar-top-links li a {
		  padding: 15px;
		  min-height: 50px;
		}
		.navbar-top-links .dropdown-menu li {
		  display: block;
		}
		.navbar-top-links .dropdown-menu li:last-child {
		  margin-right: 0;
		}
		.navbar-top-links .dropdown-menu li a {
		  padding: 3px 20px;
		  min-height: 0;
		}
		.navbar-top-links .dropdown-menu li a div {
		  white-space: normal;
		}
		.navbar-top-links .dropdown-messages,
		.navbar-top-links .dropdown-tasks,
		.navbar-top-links .dropdown-alerts {
		  width: 310px;
		  min-width: 0;
		}
		.navbar-top-links .dropdown-messages {
		  margin-left: 5px;
		}
		.navbar-top-links .dropdown-tasks {
		  margin-left: -59px;
		}
		.navbar-top-links .dropdown-alerts {
		  margin-left: -123px;
		}
		.navbar-top-links .dropdown-user {
		  right: 0;
		  left: auto;
		}
		.sidebar .sidebar-nav.navbar-collapse {
		  padding-left: 0;
		  padding-right: 0;
		}
		.sidebar .sidebar-search {
		  padding: 15px;
		}
		.sidebar ul li {
		  border-bottom: 1px solid #e7e7e7;
		}
		.sidebar ul li a.active {
		  background-color: #eeeeee;
		}
		.sidebar .arrow {
		  float: right;
		}
		.sidebar .fa.arrow:before {
		  content: "\f104";
		}
		.sidebar .active > a > .fa.arrow:before {
		  content: "\f107";
		}
		.sidebar .nav-second-level li,
		.sidebar .nav-third-level li {
		  border-bottom: none !important;
		}
		.sidebar .nav-second-level li a {
		  padding-left: 37px;
		}
		.sidebar .nav-third-level li a {
		  padding-left: 52px;
		}
		@media (min-width: 768px) {
		  .sidebar {
		    z-index: 1;
		    position: absolute;
		    width: 175px;
		    margin-top: 51px;
		  }
		  .navbar-top-links .dropdown-messages,
		  .navbar-top-links .dropdown-tasks,
		  .navbar-top-links .dropdown-alerts {
		    margin-left: auto;
		  }
		}
		.btn-outline {
		  color: inherit;
		  background-color: transparent;
		  transition: all .5s;
		}
		.btn-primary.btn-outline {
		  color: #428bca;
		}
		.btn-success.btn-outline {
		  color: #5cb85c;
		}
		.btn-info.btn-outline {
		  color: #5bc0de;
		}
		.btn-warning.btn-outline {
		  color: #f0ad4e;
		}
		.btn-danger.btn-outline {
		  color: #d9534f;
		}
		.btn-primary.btn-outline:hover,
		.btn-success.btn-outline:hover,
		.btn-info.btn-outline:hover,
		.btn-warning.btn-outline:hover,
		.btn-danger.btn-outline:hover {
		  color: white;
		}
		.login-panel {
		  margin-top: 25%;
		}
		.flot-chart {
		  display: block;
		  height: 400px;
		}
		.flot-chart-content {
		  width: 100%;
		  height: 100%;
		}
		table.dataTable thead .sorting,
		table.dataTable thead .sorting_asc,
		table.dataTable thead .sorting_desc,
		table.dataTable thead .sorting_asc_disabled,
		table.dataTable thead .sorting_desc_disabled {
		  background: transparent;
		}
		table.dataTable thead .sorting_asc:after {
		  content: "\f0de";
		  float: right;
		  font-family: fontawesome;
		}
		table.dataTable thead .sorting_desc:after {
		  content: "\f0dd";
		  float: right;
		  font-family: fontawesome;
		}
		table.dataTable thead .sorting:after {
		  content: "\f0dc";
		  float: right;
		  font-family: fontawesome;
		  color: rgba(50, 50, 50, 0.5);
		}
		.btn-circle {
		  width: 30px;
		  height: 30px;
		  padding: 6px 0;
		  border-radius: 15px;
		  text-align: center;
		  font-size: 12px;
		  line-height: 1.428571429;
		}
		.btn-circle.btn-lg {
		  width: 50px;
		  height: 50px;
		  padding: 10px 16px;
		  border-radius: 25px;
		  font-size: 18px;
		  line-height: 1.33;
		}
		.btn-circle.btn-xl {
		  width: 70px;
		  height: 70px;
		  padding: 10px 16px;
		  border-radius: 35px;
		  font-size: 24px;
		  line-height: 1.33;
		}
		.show-grid [class^="col-"] {
		  padding-top: 10px;
		  padding-bottom: 10px;
		  border: 1px solid #ddd;
		  background-color: #eee !important;
		}
		.show-grid {
		  margin: 15px 0;
		}
		.huge {
		  font-size: 30px;
		}
		.large {
		  font-size: 18px;
		}
		@media (min-width: 992px) {
			.huge {
			  font-size: 34px;
			}
			.large {
			  font-size: 20px;
			}
		}
		.panel-green {
		  border-color: #5cb85c;
		}
		.panel-green > .panel-heading {
		  border-color: #5cb85c;
		  color: white;
		  background-color: #5cb85c;
		}
		.panel-green > a {
		  color: #5cb85c;
		}
		.panel-green > a:hover {
		  color: #3d8b3d;
		}
		.panel-red {
		  border-color: #d9534f;
		}
		.panel-red > .panel-heading {
		  border-color: #d9534f;
		  color: white;
		  background-color: #d9534f;
		}
		.panel-red > a {
		  color: #d9534f;
		}
		.panel-red > a:hover {
		  color: #b52b27;
		}
		.panel-yellow {
		  border-color: #f0ad4e;
		}
		.panel-yellow > .panel-heading {
		  border-color: #f0ad4e;
		  color: white;
		  background-color: #f0ad4e;
		}
		.panel-yellow > a {
		  color: #f0ad4e;
		}
		.panel-yellow > a:hover {
		  color: #df8a13;
		}
	</style>
</head>
<body>
	<!-- Navigation -->

	<nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a class="navbar-brand page-toggle" href="#" data-page="page-index">10K Pizza</a>

			<div class="navbar-brand">
				<div class="visible-xs-block">
					<small><i class="fa fa-btc fa-fw"></i><span class="btc-price-fiat">
						<i class="fa fa-spinner fa-pulse fa-fw"></i>
					</span></small>
				</div>
				<div class="visible-sm-block visible-md-block visible-lg-block">
					<i class="fa fa-btc fa-fw"></i><span class="btc-price-fiat">
						<i class="fa fa-spinner fa-pulse fa-fw"></i>
					</span>
				</div>
			</div>
		</div>


		<!--<ul class="nav navbar-top-links navbar-right">
			<li class="dropdown">
				<a class="dropdown-toggle" data-toggle="dropdown" href="#">
					<i class="fa fa-gear fa-fw"></i> <i class="fa fa-caret-down"></i>
				</a>
				<ul class="dropdown-menu dropdown-user">
					<li><a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a>
					</li>
				</ul>
			</li>
		</ul>-->

	
		<div class="navbar-default sidebar" role="navigation">
			<div class="sidebar-nav navbar-collapse collapse">
				<ul class="nav" id="side-menu">
					<li>
						<a href="#" class="page-toggle" data-page="page-index">
							<i class="fa fa-bank fa-fw"></i> Overview
						</a>
					</li>

					<li>
						<a href="#" class="page-toggle" data-page="page-details">
							<i class="fa fa-btc fa-fw"></i> Details
						</a>
					</li>



					<li>
						<a href="#"><i class="fa fa-cogs fa-fw"></i> Manage<span class="fa arrow"></span></a>
						<ul class="nav nav-second-level">
							<li>
								<a href="#" class="page-toggle" data-page="page-manage">
									<i class="fa fa-exchange fa-fw"></i> Trades
								</a>
							</li>

							<li>
								<a href="#" class="page-toggle" data-page="page-settings">
									<i class="fa fa-cog fa-fw"></i> Settings
								</a>
							</li>

							<!--<li>
								<a href="#" class="page-toggle" data-page="page-save-restore">
									<i class="fa fa-hdd-o fa-fw"></i> Save / Restore
								</a>
							</li>-->

						</ul>
					</li>

					<!--
					<li>
						<a href="#" class="page-toggle" data-page="page-live-charts">
							<i class="fa fa-line-chart fa-fw"></i> Live Charts
						</a>
					</li>
					-->

					<li>
						<a href="#" class="page-toggle" data-page="page-analysis">
							<i class="fa fa-area-chart fa-fw"></i> Analysis
						</a>
					</li>

					<li>
						<a href="#" class="page-toggle" data-page="page-about">
							<i class="fa fa-info-circle fa-fw"></i> About
						</a>
					</li>
					
				</ul>
			</div>
		</div>
	
	</nav>

	<div id="page-wrapper">
		<div id="page-index" class="page-item">
			<div class="row">
				<div class="col-sm-12">
					<h1 class="page-header">At A Glance</h1>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-5">
					<div class="panel panel-primary">
						<div class="panel-heading">
							<div class="row">
								<div class="col-xs-12">
									<span class="cf-total huge"></span>
								</div>
							</div>
						</div>
						<div class="panel-footer">
							<span class="pull-left"><strong>Total</strong></span>
							<span class="pull-right"><i class="fa fa-money"></i></span>
							<div class="clearfix"></div>
						</div>
					</div>
				</div>

				<div class="col-sm-7">
					<div class="row half-padding">
						<div class="col-xs-4 half-padding">
							<div class="panel panel-info">
								<div class="panel-heading">
									<div class="row">
										<div class="col-xs-12">
											<span class="cf-investment large"></span>
										</div>
									</div>
								</div>
								<div class="panel-footer">
									<span class="pull-left"><strong>Investment</strong></span>
									<div class="clearfix"></div>
								</div>
							</div>
						</div>

						<div class="col-xs-4 half-padding">
							<div class="panel panel-success">
								<div class="panel-heading">
									<div class="row">
										<div class="col-xs-12">
											<span class="cf-diff large"></span>
										</div>
									</div>
								</div>
								<div class="panel-footer">
									<span class="pull-left"><strong>Difference</strong></span>
									<div class="clearfix"></div>
								</div>
							</div>
						</div>

						<div class="col-xs-4 half-padding">
							<div class="panel panel-success">
								<div class="panel-heading">
									<div class="row">
										<div class="col-xs-12">
											<span class="cf-diff-perc large"></span>
										</div>
									</div>
								</div>
								<div class="panel-footer">
									<span class="pull-left"><strong>Change</strong></span>
									<span class="pull-right"><i class="fa fa-caret-up" aria-hidden="true"></i></span>
									<div class="clearfix"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-12">
					<h3 class="page-header small-page-header">Coin Prices</h3>
				</div>
			</div>

			<div class="row cp-coin-prices half-padding">
				<div class="col-xs-6 col-sm-4 col-md-3 cp-row half-padding">
					<div class="panel cp-price-panel panel-success">
						<div class="panel-heading">
							<span class="cp-price-fiat large">$0.00</span>
							<span class="cp-price-change-arrow" style="float:right">
								<i class="fa fa-spinner fa-pulse" aria-hidden="true"></i>
							</span>
							<br />
							<span class="cp-price-btc">0.0</span> <i class="fa fa-btc" aria-hidden="true"></i>
							<span class="cp-price-delta" style="float:right">
								0.00%
							</span>
						</div>
						<div class="panel-footer">
							<span class="pull-left cp-name">Bitcoin</span>
							<div class="clearfix"></div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="page-details" class="page-item" style="display:none;">
			<div class="row">
				<div class="col-sm-12">
					<h1 class="page-header">Portfolio Details</h1>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-12">
					<h3 class="page-header small-page-header">Wallet Balances</h3>
				</div>
			</div>

			<div class="row">
				<div class="cp-breakdown half-padding col-xs-12 col-sm-6">
					<table class="table table-striped">
						<thead>
							<tr>
								<th>Coin</th>
								<th>Balance</th>
								<th>Fiat</th>
							</tr>
						</thead>
						<tbody class="cp-breakdown-tbody">
							<tr class="cp-breakdown-row">
								<td class="cp-breakdown-name">Bitcoin</th>
								<td class="cp-breakdown-balance">1.0 BTC</td>
								<td class="cp-breakdown-fiat"><i class="fa fa-spinner fa-pulse fa-fw"></i></td>
							</tr>
						</tbody>
					</table>
				</div>

				<div class="col-xs-12 col-sm-6">
					<center><strong>Breakdown</strong></center>
					<div id="monthly-chart-breakdown-pie">
						<center><big><i class="fa fa-spinner fa-pulse fa-fw"></i></big></center>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-12">
					<h3 class="page-header small-page-header">Past 3 Months</h3>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-6">
					<center><strong>Cryptocurrency Values</strong></center>
					<div id="monthly-chart">
						<center><big><i class="fa fa-spinner fa-pulse fa-fw"></i></big></center>
					</div>
				</div>
				<div class="col-sm-6">
					<center><strong>Portfolio Value</strong></center>
					<div id="monthly-chart-diff">
						<center><big><i class="fa fa-spinner fa-pulse fa-fw"></i></big></center>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-12">
					<center><strong>Wallet Contributions</strong></center>
					<div id="monthly-chart-breakdown">
						<center><big><i class="fa fa-spinner fa-pulse fa-fw"></i></big></center>
					</div>
				</div>
			</div>
		</div>

		<!--
		<div id="page-live-charts" class="page-item" style="display:none;">
			<div class="row">
				<div class="col-sm-12">
					<h1 class="page-header">Live Charts</h1>
				</div>
			</div>

			<div class="cc-row-analysis">
				<div class="row form-group cc-header hidden-xs">
					<div class="col-xs-6 col-sm-3">
						<strong>Chart Coin</strong>
					</div>
				</div>

				<div class="row">
					<div class="col-xs-6 col-sm-3 form-group">
						<label class="visible-xs-block">Chart Coin</label>
						<div class="input-group">
							<select class="form-control cc-select-live-chart"></select>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-6">
					<center><strong>Current Performance</strong></center>
					<div id="live-performance-chart">
						<center><big><i class="fa fa-spinner fa-pulse fa-fw"></i></big></center>
					</div>
				</div>

			</div>
		</div>
		-->

		<div id="page-analysis" class="page-item" style="display:none;">
			<div class="row">
				<div class="col-sm-12">
					<h1 class="page-header">Cryptocurrency Analysis</h1>
				</div>
			</div>

			<div class="cc-row-analysis">
				<div class="row form-group cc-header hidden-xs">
					<div class="col-xs-6 col-sm-3">
						<strong>Reference Coin</strong>
					</div>
					<div class="col-xs-6 col-sm-3">
						<strong>Transaction Coin</strong>
					</div>
				</div>

				<div class="row">
					<div class="col-xs-6 col-sm-3 form-group">
						<label class="visible-xs-block">Reference Coin</label>
						<div class="input-group">
							<select class="form-control cc-select-analysis"></select>
						</div>
					</div>

					<div class="col-xs-6 col-sm-3 form-group">
						<label class="visible-xs-block">Transaction Coin</label>
						<div class="input-group">
							<select class="form-control cc-select-analysis"></select>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-12">
					<h3 class="page-header small-page-header">Comparisons</h3>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-12">
					<center><strong>Relative Value - Past 3 Months</strong></center>
					<div id="comparison-chart">
						<center><big><i class="fa fa-spinner fa-pulse fa-fw"></i></big></center>
					</div>
				</div>

				<div class="col-sm-12">
					<center><strong>Price Chart - Past 3 Months</strong></center>
					<div id="comparison-price-chart">
						<center><big><i class="fa fa-spinner fa-pulse fa-fw"></i></big></center>
					</div>
				</div>
			</div>
		</div>

		<div id="page-manage" class="page-item page-wrapper-buffer" style="display:none;">
			<div class="row">
				<div class="col-sm-12">
					<h1 class="page-header">
						Your Trades
						<button type="button" class="btn btn-primary btn-outline cc-add-coin" style="float:right">Add <i class="fa fa-plus" aria-hidden="true"></i></button>
					</h1>
				</div>
			</div>

			<div class="portfolio">
				<div class="row cc-row">
					<div class="panel panel-default">
						<div class="panel-heading">
							Traded on &nbsp;<input type="text" class="cc-buy-date form-control" style="display:inline-block; width:100px" />

							<button type="button" class="btn btn-danger btn-outline cc-remove-coin" style="float:right">
								<i class="fa fa-trash" aria-hidden="true"></i>
							</button>
						</div>
						<div class="panel-body">
							<div class="col-xs-6 col-sm-3 form-group">
								<label>Bought</label>
								<div class="input-group">
									<select class="form-control cc-select"></select>
								</div>
							</div>
							<div class="col-xs-6 col-sm-3 form-group">
								<label>Value</label>
								<div class="input-group">
									<input type="number" class="form-control cc-value"></input> 
									<span class="input-group-addon cc-input-addon-span cc-abbr"></span>
								</div>
							</div>

							<div class="col-xs-6 col-sm-3 form-group">
								<label>Traded</label>
								<div class="input-group">
									<select class="form-control cc-select-trade">
										<option value=""></option>
										<optgroup label="Fiat Currency">
											<option value="CNY">Chinese Yuan</option>
											<option value="EUR">Euro</option>
											<option value="GBP">British Pound</option>
											<option value="JPY">Japanese Yen</option>
											<option value="USD">US Dollars</option>
										</optgroup>
									</select>
								</div>
							</div>
							<div class="col-xs-6 col-sm-3 form-group">
								<label>Value</label>
								<div class="input-group">
									<span class="input-group-addon cc-input-addon-span cc-abbr-fiat-trade">$</span>
									<input type="number" class="form-control cc-trade-value"></input> 
									<span class="input-group-addon cc-input-addon-span cc-abbr-crypto-trade" style="display:none;">BTC</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="page-settings" class="page-item page-wrapper-buffer" style="display:none;">
			<div class="row">
				<div class="col-sm-12">
					<h1 class="page-header">
						Settings
					</h1>
				</div>
			</div>

			<div class="row">
				<div class="panel panel-default">
					<div class="panel-heading">
						Defaults
					</div>
					<div class="panel-body">
						<div class="col-xs-6 col-sm-3 form-group">
							<div class="input-group">
								<label>Fiat Currency</label>
							</div>
						</div>
						<div class="col-xs-6 col-sm-3 form-group">
							<div class="input-group">
								<select class="form-control cc-select-fiat">
									<option value="CNY">CNY &yen;</option>
									<option value="EUR">EUR &euro;</option>
									<option value="GBP">GBP &pound;</option>
									<option value="JPY">JPY &yen;</option>
									<option value="USD" selected="selected">USD $</option>
								</select>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="page-save-restore" class="page-item page-wrapper-buffer" style="display:none;">
			<div class="row">
				<div class="col-sm-12">
					<h1 class="page-header">
						Save / Restore Portfolio
					</h1>
				</div>
			</div>

			<div class="row">
				<div class="panel panel-default">
					<div class="panel-heading">
						Cryptocurrency Portfolio Data
					</div>
					<div class="panel-body">
						<div class="col-xs-12 form-group">
							<textarea class="form-control" rows="5"></textarea>
						</div>
					</div>
					<div class="panel-footer">
						<button type="button" class="btn btn-primary cc-save-portfolio">
							Restore <i class="fa fa-plus" aria-hidden="true"></i>
						</button>
					</div>
				</div>
			</div>
		</div>

		<div id="page-about" class="page-item" style="display:none;">
			<div class="row">
				<div class="col-sm-12">
					<h1 class="page-header">About 10K Pizza</h1>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-12">
					<p>10K Pizza is a side project by <a target="blank" href="https://github.com/Cybourgeoisie">Cybourgeoisie</a>, who wanted a simple website to review the value of his cryptocurrency holdings without user logins or sharing his personal information.</p>

					<p>This website can be audited directly by viewing the page source, and the code is <a target="blank" href="https://github.com/Cybourgeoisie/cryptofolio">maintained on Github</a>. There is no backend server logic, and the entire site is statically generated with API calls to retrieve current and historical cryptocurrency price information. None of your personally-entered information is sent to or from any sources, and your data stays entirely on your computer (or phone / tablet).</p>

					<p>The cryptocurrency market data and listings are retrieved from <a target="blank" href="https://www.cryptocompare.com/">CryptoCompare</a> and <a target="blank" href="https://coinmarketcap.com/">CoinMarketCap</a>, respectively. Both websites provide excellent APIs that have made this application possible, and both accept donations for their free services.</p>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-12">
					<h3 class="page-header small-page-header">Donate</h3>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-12">
					<p>If you find this website useful to you, please consider buying the maintainer a beer in your preferred cryptocurrency:</p>

					<div class="row">
						<div class="col-xs-3 col-sm-2 col-sm-offset-1">
							<center><big><label>Bitcoin</label></big></center>
						</div>
						<div class="col-xs-8 form-group">
							<div class="input-group">
								<input type="text" class="form-control" size="50" value="1Kf44DXNZVa1X48vR8YS19XJEjG1KQWBsY"></input>
							</div>
						</div>
					</div>

					<div class="row">
						<div class="col-xs-3 col-sm-2 col-sm-offset-1">
							<center><big><label>Litecoin</label></big></center>
						</div>
						<div class="col-xs-8 form-group">
							<div class="input-group">
								<input type="text" class="form-control" size="50" value="LaTXY5ZKQTXAiQYdZ4yaXyDMWc42jN9JLe"></input>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-12">
					<h3 class="page-header small-page-header">Contact</h3>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-12">
					<p>You can reach out to me on <a target="blank" href="https://twitter.com/cybourgeoisie">Twitter</a> or send me an email to my Gmail account (cybourgeoisie).</p>
				</div>
			</div>
		</div>

		<br />
		<div class="clear"></div>

	</div>

	<div class="modal fade" id="removeCoinRow" tabindex="-1" role="dialog" aria-labelledby="modalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title" id="modalLabel">Remove Coin</h4>
				</div>
				<div class="modal-body">
					Are you sure you want to remove this row?
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-danger cc-remove-coin-confirm" data-dismiss="modal">Remove <i class="fa fa-trash" aria-hidden="true"></i></button>
				</div>
			</div>
		</div>
	</div>

	<!-- jQuery -->
	<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>

	<!-- Raphael -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js" integrity="sha256-67By+NpOtm9ka1R6xpUefeGOY8kWWHHRAKlvaTJ7ONI=" crossorigin="anonymous"></script>

	<!-- Bootstrap JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

	<!-- Morris Charts -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js" integrity="sha256-0rg2VtfJo3VUij/UY9X0HJP7NET6tgAY98aMOfwP0P8=" crossorigin="anonymous"></script>

	<!-- Moment.js -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js" integrity="sha256-1hjUhpc44NwiNg8OwMu2QzJXhD8kcj+sJA3aCQZoUjg=" crossorigin="anonymous"></script>

	<!-- Bootstrap Date Range Picker -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-daterangepicker/2.1.25/daterangepicker.min.js" integrity="sha256-WniDtKHyk2OPgNtTFKu/sL8zGBzmCfMcmEKRAqfi25c=" crossorigin="anonymous"></script>

	<!-- Metis Menu -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/metisMenu/2.7.0/metisMenu.min.js" integrity="sha256-EdeVuolWxmuLTapvaUaXTYIYKTIlhc0nUEGPEMn8MhQ=" crossorigin="anonymous"></script>

	<!-- Socket.io -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.2/socket.io.min.js" integrity="sha256-WKvqiY0jZHWQZIohYEmr9KUC5rEaYEOFTq+ByllJK8w=" crossorigin="anonymous"></script>

	<!-- CryptoCompare Streamer Utils -->
	<script src="./ccc-streamer-utilities.js"></script>


	<!-- Logic -->
	<script type="text/javascript">
		$(document).ready(function() {
			$('#side-menu').metisMenu();

			var fiat_currencies = {
				'CNY' : {'symbol': '¥', 'name': 'CNY', 'rate': 1.0},
				'EUR' : {'symbol': '€', 'name': 'GBP', 'rate': 1.0},
				'GBP' : {'symbol': '£', 'name': 'GBP', 'rate': 1.0},
				'JPY' : {'symbol': '¥', 'name': 'JPY', 'rate': 1.0},
				'USD' : {'symbol': '$', 'name': 'USD', 'rate': 1.0}
			};

			var cryptos = {};
			var cc_investments = {};
			var fiat = {'symbol': '$', 'name': 'USD', 'rate': 1.0};
			var morris_charts = {};

			// First, load all of the user's basic settings
			loadSettings();

			// Get the fiat exchange rates
			$.getJSON("https://api.fixer.io/latest?base=USD", function(data) {
				$.each(fiat_currencies, function(k, v) {
					if (k == 'USD') return;
					fiat_currencies[k].rate = data.rates[k];
				});
			});

			// Get the coin values
			var keys = Object.keys(cryptos);

			$.getJSON('https://api.coinmarketcap.com/v1/ticker/', function(data) {
				var items = [];

				$.each(data, function(key, crypto) {
					if (cryptos.hasOwnProperty(crypto.symbol)) {
						return;
					}

					if (crypto.symbol == 'BTC') {
						BTC_PRICE = parseFloat(crypto.price_usd);
					}

					cryptos[crypto.symbol] = {
						'id'        : crypto.id,
						'name'      : crypto.name,
						'symbol'    : crypto.symbol,
						'price_usd' : parseFloat(crypto.price_usd),
						'price_btc' : parseFloat(crypto.price_btc),
						'delta_1h'  : parseFloat(crypto.percent_change_1h),
						'delta_24h' : parseFloat(crypto.percent_change_24h),
						'delta_7d'  : parseFloat(crypto.percent_change_7d)
					};

					cryptos[crypto.symbol].price_usd = parseFloat(cryptos[crypto.symbol].price_usd.toFixed(2));

					items.push("<option value='" + crypto.symbol + "'>" + crypto.name + "</option>");

					if (cryptos[crypto.symbol].price_btc < 0.000001)
						cryptos[crypto.symbol].price_btc = cryptos[crypto.symbol].price_btc.toFixed(10);
					else
						cryptos[crypto.symbol].price_btc = cryptos[crypto.symbol].price_btc.toFixed(6);
				});

				// Add our list
				$('.cc-select').html($('.cc-select').html() + "<option selected></option>" + items.join(''));
				//$('.cc-select-trade').html($('.cc-select-trade').html() + '<optgroup label="Cryptocurrency">' + items.join('') + '</optgroup>');
				$('.cc-select-analysis').html($('.cc-select-analysis').html() + "<option selected></option>" + items.join(''));
				$('.cc-select-live-chart').html($('.cc-select-live-chart').html() + "<option selected></option>" + items.join(''));

				// Set BTC & ETH by default in coin analysis
				var $first_coin_analysis = $('.cc-select-analysis:first');
				$first_coin_analysis.val('BTC');
				var $last_coin_analysis = $('.cc-select-analysis:last');
				$last_coin_analysis.val('BTC');

				// Set BTC by default in live chart
				var $first_coin_live_chart = $('.cc-select-live-chart:first');
				$first_coin_live_chart.val('BTC');

				// Set the BTC price
				$('span.btc-price-fiat').html(fiat.symbol + (cryptos['BTC']['price_usd'] * fiat.rate).toFixed(2))

				// Load any previous values
				load();
			});

			// Set the initial events
			setCoinRowEvents($('.cc-row:last'));
			$('.cc-add-coin').click(addCoinRow);
			$('.page-toggle').click(pageToggle);
			$('.cc-select-analysis').change(updateCoinAnalysis);
			$('.cc-select-fiat').change(setFiat);
			$('.cc-select-fiat').change(saveSettings);

			function pageToggle(event) {
				event.preventDefault();
				var page = $(this).data('page');

				if (!$('#' + page).is(":visible"))
				{
					$('.page-item').hide();
					$('#' + page).show();

					// If we're showing the index page, redraw the charts
					if (page == 'page-index')
					{
						//generateMonthlyChartData();
					}
					else if (page == 'page-details')
					{
						generateMonthlyChartData();
						displayMonthlyChart();
						displayMonthlyChartBreakdown();
					}
					else if (page == 'page-analysis')
					{
						var $first_coin_analysis = $('.cc-select-analysis:first');
						var $last_coin_analysis = $('.cc-select-analysis:last');
						updateCoinAnalysis.call($first_coin_analysis, true);
						updateCoinAnalysis.call($last_coin_analysis, false);

						if (morris_charts.hasOwnProperty('comparison-price-chart') &&
							morris_charts.hasOwnProperty('comparison-chart'))
						{
							morris_charts['comparison-price-chart'].redraw();
							morris_charts['comparison-chart'].redraw();
						}
						else
						{
							generateComparisonChart();
						}
					}
					else if (page == 'page-live-charts')
					{
						//initiateLiveChart();
					}
				}
			}

			function updateSelection(b_suppress_chart_generation) {
				var row = $(this).closest('.cc-row');
				var val = row.find('.cc-select').val();
				if (!val)
					return;

				if (!b_suppress_chart_generation || typeof(b_suppress_chart_generation) !== "boolean")
					b_suppress_chart_generation = false;

				var crypto = cryptos[val];
				row.find('.cc-abbr').html(crypto.symbol);
				updatePrice.call(this);
				updateCoinPrices.call(this);
				initializeWalletBalances.call(this);

				getLastMonthPrices(crypto.symbol, false, b_suppress_chart_generation);
			}

			function updateSelectionTrade() {
				var row = $(this).closest('.cc-row');
				var val = row.find('.cc-select-trade').val();
				if (!val)
					return;

				if (fiat_currencies.hasOwnProperty(val)) {
					row.find('.cc-abbr-crypto-trade').hide();
					row.find('.cc-abbr-fiat-trade').show().html(fiat_currencies[val].symbol);
				} else {
					var crypto = cryptos[val];
					row.find('.cc-abbr-fiat-trade').hide();
					row.find('.cc-abbr-crypto-trade').show().html(crypto.symbol);
				}
			}

			function updateCoinAnalysis(b_suppress_chart_generation) {
				var $sel = $(this).closest('.cc-select-analysis');
				var val = $sel.val();
				if (!val)
					return;

				if (!b_suppress_chart_generation || typeof(b_suppress_chart_generation) !== "boolean")
					b_suppress_chart_generation = false;

				var crypto = cryptos[val];
				getLastMonthPrices(crypto.symbol, true, b_suppress_chart_generation);
			}

			var BTC_PRICE = 1;
			function displayQuote(quote) {
				var symbol = quote.FROMSYMBOL;
				if (alternate_coin_symbols_inverted.hasOwnProperty(symbol)) {
					symbol = alternate_coin_symbols_inverted[symbol];
				}

				var row = document.getElementById(symbol);
				var breakdownRow = document.getElementsByClassName('cp-breakdown-' + symbol)[0];

				var inTheGreen = (quote.CHANGEPCT24H >= 0.0);

				if (row) {
					row.getElementsByClassName('cp-price-panel')[0].className = "panel cp-price-panel " + (inTheGreen ? 'panel-success' : 'panel-danger');
					row.querySelector('.cp-price-change-arrow i').className = "fa " + (inTheGreen ? 'fa-arrow-up' : 'fa-arrow-down');
					row.getElementsByClassName('cp-price-delta')[0].innerHTML = quote.CHANGEPCT24H.toFixed(2) + "%";
				}

				quote.PRICE = parseFloat(quote.PRICE);

				if (symbol == 'BTC') {
					BTC_PRICE = quote.PRICE;

					if (row) {
						row.getElementsByClassName('cp-price-fiat')[0].innerHTML = fiat.symbol + (quote.PRICE * fiat.rate).toFixed(2);
						row.getElementsByClassName('cp-price-btc')[0].innerHTML = '1.0';
					}

					cryptos[symbol].price_usd = quote.PRICE.toFixed(2);
					cryptos[symbol].price_btc = 1.0;

					// Update the other places where BTC is used
					$('span.btc-price-fiat').html(fiat.symbol + (quote.PRICE * fiat.rate).toFixed(2));

					if (breakdownRow) {
						breakdownRow.getElementsByClassName('cp-breakdown-fiat')[0].innerHTML = fiat.symbol + (cc_investments[symbol] * quote.PRICE * fiat.rate).toFixed(2);
					}
				}
				else
				{
					if (quote.PRICE < 0.000001)
						quote.PRICE = quote.PRICE.toFixed(10);
					else
						quote.PRICE = quote.PRICE.toFixed(6);

					if (row) {
						row.getElementsByClassName('cp-price-fiat')[0].innerHTML = fiat.symbol + (quote.PRICE * BTC_PRICE * fiat.rate).toFixed(2);
						row.getElementsByClassName('cp-price-btc')[0].innerHTML = quote.PRICE;
					}

					cryptos[symbol].price_usd = (quote.PRICE * BTC_PRICE).toFixed(2);
					cryptos[symbol].price_btc = quote.PRICE;

					if (breakdownRow) {
						breakdownRow.getElementsByClassName('cp-breakdown-fiat')[0].innerHTML = fiat.symbol + (cc_investments[symbol] * (quote.PRICE * BTC_PRICE * fiat.rate)).toFixed(2);
					}
				}

				updateTotal();
			}

			var socket, socket_subscription;
			function initiateLiveQuotes() {
				if (!socket)
					socket = io.connect('https://streamer.cryptocompare.com/');

				// Clear out the existing subscriptions
				if (socket_subscription) {
					socket.emit('SubRemove', {subs:socket_subscription} );
				}

				//Format: {SubscriptionId}~{ExchangeName}~{FromSymbol}~{ToSymbol}
				//Use SubscriptionId 0 for TRADE, 2 for CURRENT and 5 for CURRENTAGG
				//For aggregate quote updates use CCCAGG as market
				socket_subscription = ['5~CCCAGG~BTC~USD'];
				var coins = [];
				$.each($('.cc-select'), function(key, val) {
					var row = $(val).closest('.cc-row');
					var id = $(val).val();
					if (!id || coins.indexOf(id) !== -1) return;
					coins.push(id);
					var symbol = cryptos[id].symbol;

					if (symbol == 'BTC') {
						return;
					}

					if (alternate_coin_symbols.hasOwnProperty(id)) {
						symbol = alternate_coin_symbols[id];
					}

					if (!symbol) return;
					socket_subscription.push('5~CCCAGG~' + symbol + '~BTC');
				});

				socket.emit('SubAdd', {subs:socket_subscription} );

				socket.on("m", function(message){
					var messageType = message.substring(0, message.indexOf("~"));
					var res = {};
					if (messageType === CCC.STATIC.TYPE.CURRENTAGG) {
						res = CCC.CURRENT.unpack(message);
						updateQuote(res);
					}
				});
			}

			var quotes = {};
			var updateQuote = function(result) {
				var keys = Object.keys(result);
				var pair = result.FROMSYMBOL + "-" + result.TOSYMBOL;

				if (!quotes.hasOwnProperty(pair)) {
					quotes[pair] = {}
				}

				for (var i = 0; i < keys.length; ++i) {
					quotes[pair][keys[i]] = result[keys[i]];
				}
				quotes[pair]["CHANGE24H"] = quotes[pair]["PRICE"] - quotes[pair]["OPEN24HOUR"];
				quotes[pair]["CHANGEPCT24H"] = quotes[pair]["CHANGE24H"]/quotes[pair]["OPEN24HOUR"] * 100;
				displayQuote(quotes[pair]);
			}

			function addCoinRow() {
				var newRow = $('.cc-row:first').clone(false);
				newRow.find('.cc-select, .cc-value, .cc-select-trade, .cc-trade-value, .cc-buy-date').val('');
				newRow.find('.cc-select-trade').val('USD');
				newRow.find('.cc-abbr').html('');
				setCoinRowEvents(newRow);
				newRow.prependTo('.portfolio');
			}

			function setCoinRowEvents(row) {
				var $cc_select = row.find('.cc-select');
				var $cc_value = row.find('.cc-value');
				var $cc_select_trade = row.find('.cc-select-trade');
				var $cc_buy_price = row.find('.cc-trade-value');
				$cc_select.change(updateSelection);
				$cc_select.change(initializeWalletBalances);
				$cc_select.change(save);
				$cc_select.change(initiateLiveQuotes);
				$cc_value.change(updatePrice);
				$cc_value.change(initializeWalletBalances);
				$cc_value.change(save);
				$cc_value.change(refreshCharts);
				$cc_value.change(initiateLiveQuotes);
				$cc_select_trade.change(updateSelectionTrade);
				$cc_select_trade.change(save);
				$cc_buy_price.change(updatePrice);
				$cc_buy_price.change(save);
				row.find('.cc-remove-coin').click(removeCoinRow);
				row.find('.cc-buy-date').daterangepicker({
					singleDatePicker: true,
					showDropdowns: true
				});
				row.find('.cc-buy-date').on('apply.daterangepicker', save);
			}

			function removeCoinRow() {
				var row = $(this).closest('.cc-row');

				// Verify that the user wants to do this
				var modal = $('#removeCoinRow').modal('show');
				modal.find('.cc-remove-coin-confirm').click(function() {
					// If this is the last row, just clear it
					if ($('.cc-row').length <= 1)
					{
						row.find('.cc-select, .cc-value, .cc-select-trade, .cc-trade-value').val('');
						row.find('.cc-usd, .cc-abbr').html('');
					}
					else
					{
						row.remove();
					}

					// Reload the data
					updateTotal();
					updateCoinPrices();
					initializeWalletBalances();
					updatePrice();
					refreshCharts();
					initiateLiveQuotes();

					// And save
					save();
				});

				modal.on('hidden.bs.modal', function () {
					// Remove the event attached to this
					modal.find('.cc-remove-coin-confirm').off('click');
				});
			}

			function refreshCharts()
			{
				generateMonthlyChartData();

				var $page = $('.page-item:visible');

				// If we're showing the index page, redraw the charts
				if ($page.attr('id') == 'page-index')
				{
				}
				else if ($page.attr('id') == 'page-details')
				{
					displayMonthlyChart();
					displayMonthlyChartBreakdown();						
				}
			}

			function updateCoinPrices() {
				var cp = $('.cp-coin-prices');

				// Get the first cp-row
				var row = cp.find('.cp-row:last');

				// Remove all other cp-rows
				cp.empty();

				var coins = [];
				$.each($('.cc-select'), function(key, val) {
					var id = $(val).val();
					if (!id || coins.indexOf(id) !== -1) return;
					coins.push(id);

					var crypto = cryptos[id];

					var newRow = row.clone(true);
					newRow.attr('id', crypto.symbol);
					newRow.find('.cp-name').html(crypto.name);
					newRow.appendTo('.cp-coin-prices');
				});
			}

			function initializeWalletBalances() {
				var coins = {};
				$.each($('.cc-select'), function(key, val) {
					var row = $(val).closest('.cc-row');
					var id = $(val).val();
					if (!id) return;

					var crypto = cryptos[id];

					if (coins.hasOwnProperty(id)) {
						coins[id].value += parseFloat(row.find('.cc-value').val());
						coins[id].fiat += parseFloat(row.find('.cc-value').val() * crypto.price_usd);
					} else {
						coins[id] = {
							'symbol' : crypto.symbol,
							'name'   : crypto.name,
							'value'  : parseFloat(row.find('.cc-value').val()),
							'fiat'   : parseFloat(row.find('.cc-value').val() * crypto.price_usd)
						};
					}
				});

				// Get the last row
				var br_row = $('.cp-breakdown-tbody').find('.cp-breakdown-row:last');

				// Remove all other cp-rows
				$('.cp-breakdown-tbody').empty();

				$.each(coins, function(k, crypto) {
					var newRow = br_row.clone(true);
					newRow.removeClass().addClass('cp-breakdown-row cp-breakdown-' + crypto.symbol);
					newRow.find('.cp-breakdown-name').html(crypto.name);
					newRow.find('.cp-breakdown-balance').html(crypto.value.toFixed(2) + " " + crypto.symbol);
					newRow.find('.cp-breakdown-fiat').html(fiat.symbol + (crypto.fiat * fiat.rate).toFixed(2));
					newRow.appendTo('.cp-breakdown-tbody');
				});
			}

			// Deal with differences in the crypto symbols
			var alternate_coin_symbols = {
				'MIOTA' : 'IOT'
			};

			var alternate_coin_symbols_inverted = {
				'IOT' : 'MIOTA'
			};

			var price_data_daily = [], price_labels_daily = [];
			function getLastMonthPrices(coin_id, b_coin_analysis, b_suppress_chart_generation) {
				// Don't retrieve data we already have
				if (price_labels_daily && price_labels_daily.indexOf(coin_id) !== -1) {
					if (!b_suppress_chart_generation) {						
						if (b_coin_analysis) {
							setTimeout(generateComparisonChart, 0);
						} else {
							setTimeout(refreshCharts, 0);
						}
					}
					return;
				}

				var search_coin_id = coin_id;
				if (alternate_coin_symbols.hasOwnProperty(search_coin_id)) {
					search_coin_id = alternate_coin_symbols[search_coin_id]
				}

				// Get the coin's prices over the last day
				//$.getJSON('http://www.10k.pizza/data/' + coin_id + '_3mo.json', function( data ) {
				$.getJSON('https://min-api.cryptocompare.com/data/histoday?fsym=' + search_coin_id + '&tsym=USD&limit=90', function( data ) {
					if (!data.hasOwnProperty('Data')) return;
					price_labels_daily.push(coin_id);

					if (price_data_daily.length > 0)
					{
						var i = 0;
						$.each(data.Data, function(key, val) {
							price_data_daily[i++][coin_id] = val.close;
						});
					}
					else
					{
						$.each(data.Data, function(key, val) {
							var item = {
								'y': val.time*1000
							};
							item[coin_id] = val.close;
							price_data_daily.push(item);
						});
					}

					if (!b_suppress_chart_generation) {	
						if (b_coin_analysis) {
							generateComparisonChart();
						} else {
							refreshCharts();
						}
					}
				});
			}

			var mc_data, mc_portfolio_data, mc_breakdown_data, mc_breakdown_pie_data;
			function generateMonthlyChartData() {
				// Pick the data we want to show
				var coin_labels = [], coin_ids = [];
				$.each($('.cc-select'), function(key, val) {
					var value = $(val).val();
					if (value && coin_ids.indexOf(value) == -1)
					{
						coin_ids.push(value);
						coin_labels.push(value);
					}
				});

				// If we don't have anything, use bitcoin if provided
				if (coin_ids.length < 1)
				{
					coin_ids.push('BTC');
					coin_labels.push('BTC');
				}

				var coin_prices = [], coin_totals = [];
				$.each(coin_ids, function(key, coin_id) {
					$.each(price_data_daily, function(inner_key, inner_val)
					{
						if (inner_val.hasOwnProperty(coin_id))
						{
							if (!coin_prices[inner_key])
								coin_prices[inner_key] = {'y': inner_val['y']};
							coin_prices[inner_key][coin_id] = (inner_val[coin_id] * fiat.rate).toFixed(2);

							if (!coin_totals[inner_key])
								coin_totals[inner_key] = {'y': inner_val['y']};

							var value = (cc_investments.hasOwnProperty(coin_id)) ? cc_investments[coin_id] : 0;
							coin_totals[inner_key][coin_id] = (inner_val[coin_id] * value * fiat.rate).toFixed(2);
						}
					});
				});

				var diff_data = [];
				$.each(coin_prices, function(key, val) {
					var total = 0;
					$.each(val, function(k, v) {
						var value = (cc_investments.hasOwnProperty(k)) ? cc_investments[k] : 0;
						if (k != 'y') total += (v * value);
					});

					var item = {
						'y': val.y,
						'total': (total).toFixed(2)
					};

					diff_data.push(item);
				});

				var final_totals = [], sum_total = 0;
				$.each(coin_totals[coin_totals.length-1], function(k, v) {
					if (k == 'y') return;
					final_totals.push({'label' : k, 'value' : v});
					sum_total += parseFloat(v);
				});

				mc_data = {'data' : coin_prices, 'labels' : coin_labels};
				mc_portfolio_data = {'data' : diff_data}
				mc_breakdown_data = {'data' : coin_totals, 'labels' : coin_labels};
				mc_breakdown_pie_data = {'data' : final_totals, 'total' : sum_total};
			}

			function displayMonthlyChart() {
				// Make sure that we have all the data first
				if (mc_data['data'][0].length < mc_data['labels'].length) {
					return;
				}

				// Clear the existing graph
				$('#monthly-chart').empty();

				morris_charts['monthly-chart'] = Morris.Line({
					element: 'monthly-chart',
					data: mc_data['data'],
					parseTime: true,
					xkey: 'y',
					ykeys: mc_data['labels'],
					labels: mc_data['labels'],
					preUnits: fiat.symbol,
					pointSize: 1
				});

				// Clear the existing graph
				$('#monthly-chart-diff').empty();

				morris_charts['monthly-chart-diff'] = Morris.Line({
					element: 'monthly-chart-diff',
					data: mc_portfolio_data['data'],
					parseTime: true,
					xkey: 'y',
					ykeys: ['total'],
					labels: ['Total (' + fiat.symbol + ')'],
					preUnits: fiat.symbol,
					pointSize: 1
				});
			}

			function displayMonthlyChartBreakdown() {
				// Portfolio totals breakdown
				$('#monthly-chart-breakdown').empty();

				morris_charts['monthly-chart-breakdown'] = Morris.Area({
					element: 'monthly-chart-breakdown',
					data: mc_breakdown_data['data'],
					parseTime: true,
					xkey: 'y',
					ykeys: mc_breakdown_data['labels'],
					labels: mc_breakdown_data['labels'],
					preUnits: fiat.symbol,
					pointSize: 0
				});

				// Totals Pie Chart
				$('#monthly-chart-breakdown-pie').empty();

				var sum_total = mc_breakdown_pie_data['total'];
				morris_charts['monthly-chart-breakdown-pie'] = Morris.Donut({
					element: 'monthly-chart-breakdown-pie',
					data: mc_breakdown_pie_data['data'],
					formatter: function (y, data) { return (y/sum_total * 100).toFixed(2) + '%' }
				});
			}

			function generateComparisonChart() {
				// Pick the data we want to show
				var coin_labels = [], coin_ids = [];
				$.each($('.cc-select-analysis'), function(key, val) {
					var value = $(val).val();
					if (value && coin_ids.indexOf(value) == -1)
					{
						coin_ids.push(value);
						coin_labels.push(value);
					}
				});

				// If we don't have anything, use bitcoin if provided
				if (coin_ids.length < 1)
				{
					coin_ids.push('BTC');
					coin_labels.push('BTC');
				}

				// Comparison label
				var first_coin = $('.cc-select-analysis:first').val();
				var last_coin  = $('.cc-select-analysis:last').val();
				if (!last_coin) last_coin = first_coin;
				var comparison_label = first_coin + '-' + last_coin;

				var coin_prices = [], comparison_prices = [];
				$.each(coin_ids, function(key, coin_id) {
					$.each(price_data_daily, function(inner_key, inner_val)
					{
						if (inner_val.hasOwnProperty(coin_id))
						{
							if (!coin_prices[inner_key])
								coin_prices[inner_key] = {'y': inner_val['y']};
							coin_prices[inner_key][coin_id] = inner_val[coin_id];

							// Contribute to comparison chart
							if (!comparison_prices[inner_key])
								comparison_prices[inner_key] = {'y': inner_val['y']};
						}
					});
				});

				// Make sure that we have all the data first
				if (coin_prices[0].length - 1 < coin_ids.length) {
					return;
				}

				// Clear the existing graph
				$('#comparison-price-chart').empty();

				morris_charts['comparison-price-chart'] = Morris.Line({
					element: 'comparison-price-chart',
					data: coin_prices,
					parseTime: true,
					xkey: 'y',
					ykeys: coin_labels,
					labels: coin_labels,
					pointSize: 1,
					resize: true
				});

				// Generate the comparison prices
				$.each(coin_prices, function(key, coins) {
					if (coin_prices[key][first_coin] > 0) {
						comparison_prices[key][comparison_label] = (coin_prices[key][last_coin] / coin_prices[key][first_coin]).toFixed(5);
					} else {
						comparison_prices[key][comparison_label] = 0;
					}
				});

				// Clear the existing graph
				$('#comparison-chart').empty();

				morris_charts['comparison-chart'] = Morris.Area({
					element: 'comparison-chart',
					data: comparison_prices,
					parseTime: true,
					xkey: 'y',
					ykeys: [comparison_label],
					labels: [comparison_label],
					pointSize: 1
				});
			}

			function updatePrice() {
				var coins = {};
				$.each($('.cc-select'), function(key, val) {
					var row = $(val).closest('.cc-row');
					var id = $(val).val();
					if (!id) return;

					if (coins.hasOwnProperty(id)) {
						coins[id] += parseFloat(row.find('.cc-value').val());
					} else {
						coins[id] = parseFloat(row.find('.cc-value').val());
					}
				});

				$.each(coins, function(id, value) {
					var crypto = cryptos[id];
					cc_investments[crypto.symbol] = value;
				});

				updateTotal.call(this);
			}

			function updateTotal() {
				var total = 0, investment = 0;
				$.each($('.cc-value'), function(key, val) {
					var row = $(val).closest('.cc-row');
					var val = row.find('.cc-select').val();
					if (!val) return;

					var crypto = cryptos[val];
					var usd = parseFloat(row.find('.cc-value').val() * crypto.price_usd);
					var buy = parseFloat(row.find('.cc-trade-value').val());
					total = parseFloat(total + usd * fiat.rate);
					if (buy > 0) {
						var traded = row.find('.cc-select-trade').val();

						// Fiat Currency Purchase
						if (fiat_currencies.hasOwnProperty(traded)) {
							var rate = fiat.rate / fiat_currencies[traded].rate;
							investment = parseFloat(investment + buy * rate);
						}
					}
				});

				$('.cf-total').html(fiat.symbol + (total).toFixed(2));
				if (!investment) investment = 0;
			
				$('.cf-investment').html(fiat.symbol + (investment).toFixed(2));

				var diff = (investment >= 0.01) ? (total - investment) : (0);
				var diff_perc = (investment >= 0.01) ? (diff / investment * 100) : (0);

				var $cf_diff      = $('.cf-diff');
				var $cf_diff_perc = $('.cf-diff-perc');

				var color;
				if (diff >= 0)
				{
					color = 'green';
					$cf_diff.closest('.panel').removeClass('panel-danger').addClass('panel-success');
					$cf_diff_perc.closest('.panel').removeClass('panel-danger').addClass('panel-success');
				}
				else
				{
					color = 'darkred';
					$cf_diff.closest('.panel').removeClass('panel-success').addClass('panel-danger');
					$cf_diff_perc.closest('.panel').removeClass('panel-success').addClass('panel-danger');
				}

				$cf_diff.html('<span style="color:' + color + '">' + fiat.symbol + diff.toFixed(2) + '</span>');
				$cf_diff_perc.html('<span style="color:' + color + '">' + diff_perc.toFixed(2) + '%</span>');

				// Now save the user's options
				save();
			}

			function setFiat() {
				var local_fiat = $('.cc-select-fiat').val();
				fiat = fiat_currencies[local_fiat];
			}

			function saveSettings() {
				var settings = {
					'fiat' : $('.cc-select-fiat').val()
				};

				localStorage.setItem('settings', JSON.stringify(settings));
			}

			function loadSettings() {
				var settings;
				var settings_json = localStorage.getItem('settings');
				if (settings_json)
					settings = JSON.parse(settings_json);

				if (settings) {
					if (settings['fiat']) {
						$('.cc-select-fiat').val(settings['fiat']);
						setFiat();
					}
				}
			}

			function save() {
				var cryptofolio = {};
				$.each($('.portfolio').find('.cc-row'), function(key, val) {
					var row = $(val);
					var val = row.find('.cc-select').val();
					if (!val) return;

					var datetime = Date.parse(row.find('.cc-buy-date').val());
					if (!cryptofolio.hasOwnProperty(datetime))
						cryptofolio[datetime] = [];

					cryptofolio[datetime].push({
						'id'       : val,
						'value'    : row.find('.cc-value').val(),
						'id-trade' : row.find('.cc-select-trade').val(),
						'buy'      : row.find('.cc-trade-value').val(),
						'buy-date' : row.find('.cc-buy-date').val()
					});
				});

				var ordered_cryptofolio = [];
				Object.keys(cryptofolio).sort().forEach(function(key) {
					$.each(cryptofolio[key], function(k, v) {
						ordered_cryptofolio.push(v);
					});
				});

				localStorage.setItem('cryptocurrency-portfolio', JSON.stringify(ordered_cryptofolio));
			}

			function load() {
				// Now load the cryptofolio
				var cryptofolio_json = localStorage.getItem('cryptocurrency-portfolio');
				if (cryptofolio_json)
					cryptofolio = JSON.parse(cryptofolio_json);

				if (!cryptofolio_json || !cryptofolio || cryptofolio.length == 0)
				{
					// Use 1 BTC as default
					var bitcoin = cryptos['BTC'];

					var row = $('.portfolio').find('.cc-row:last');

					// Then modify the current row
					row.find('.cc-select').val('BTC');
					row.find('.cc-value').val(1);
					row.find('.cc-select-trade').val('USD');
					row.find('.cc-trade-value').val(bitcoin.price_usd);

					// And trigger the event
					updateSelection.call(row);
					updateSelectionTrade.call(row);

					// Now delete the row & resave - total hack for now
					addCoinRow();
					row.remove();
					save();
				}

				var last_key = cryptofolio.length-1;
				$.each(cryptofolio, function(key, val) {
					var row = $('.portfolio').find('.cc-row:first');

					if (row.find('.cc-select').val() != '') {
						addCoinRow();
						row = $('.portfolio').find('.cc-row:first');
					}

					// Then modify the current row
					row.find('.cc-select').val(val['id']);
					row.find('.cc-value').val(val['value']);
					row.find('.cc-select-trade').val(val['id-trade']);
					row.find('.cc-trade-value').val(val['buy']);
					row.find('.cc-buy-date').data('daterangepicker').setStartDate(val['buy-date']);
					row.find('.cc-buy-date').data('daterangepicker').setEndDate(val['buy-date']);

					// And trigger the event
					updateSelection.call(row);
					updateSelectionTrade.call(row);
				});

				initiateLiveQuotes();
			}
		});
	</script>

	<script type="text/javascript">
		if (document.location.hostname.search("10k.pizza") !== -1)
		{
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-104875736-1', 'auto');
			ga('send', 'pageview');
		}
	</script>
</body>
</html>